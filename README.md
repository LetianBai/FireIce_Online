# FireIce Online - 森林冰火人 联机版

一个基于Web的森林冰火人游戏联机对战平台，支持单人和多人在线游玩。

## 功能特性

- ✅ 使用Ruffle引擎运行SWF游戏，无需Flash Player
- ✅ 支持创建/加入游戏房间
- ✅ 实时联机对战，低延迟
- ✅ 支持自定义SWF文件加载
- ✅ 可自定义按键配置
- ✅ 响应式布局，支持移动端

## 快速开始

### 1. 安装依赖

```bash
npm install
```

### 2. 启动服务器

```bash
npm start
```

服务器默认运行在 `http://localhost:8080`

### 3. 开始游戏

1. 打开浏览器访问 `http://localhost:8080`
2. 输入你的名字
3. 点击"进入游戏"创建新房，或输入房间号加入已有房间

## 按键说明

### 玩家1 (P1)
| 按键 | 功能 |
|------|------|
| A | 左移 |
| D | 右移 |
| W | 跳跃 |
| 空格 | 确认 |

### 玩家2 (P2)
| 按键 | 功能 |
|------|------|
| ← | 左移 |
| → | 右移 |
| ↑ | 跳跃 |
| 空格 | 确认 |

## 自定义按键

游戏支持自定义按键配置：

1. 进入游戏后点击右上角"⚙️ 设置"
2. 点击需要修改的按键框
3. 按下你想设置的键
4. 点击"保存"生效

## 加载自定义SWF

### 方式一：大厅加载
进入游戏前，在大厅的"自定义SWF文件"选择你的游戏文件

### 方式二：设置中加载
1. 点击右上角"⚙️ 设置"
2. 在"加载SWF"区域选择文件
3. 点击"保存"

## 部署到服务器

### 本地部署
```bash
# 方式一：直接运行
npm start

# 方式二：使用PM2
npm install -g pm2
pm2 start server.js
```

### 服务器部署
1. 上传所有文件到服务器
2. 运行 `npm install`
3. 配置SSL证书（生产环境建议使用HTTPS）
4. 使用Nginx反向代理或PM2运行

### 阿里云部署注意事项
- 开放端口8080（或你配置的端口）
- 配置安全组规则
- 建议使用PM2保持运行

## 技术栈

- **前端**: HTML5, CSS3, JavaScript
- **游戏引擎**: Ruffle (Flash模拟器)
- **后端**: Node.js, WebSocket
- **实时通信**: ws库

## 文件结构

```
pyb&g/
├── index.html          # 游戏主页面
├── server.js          # WebSocket服务器
├── package.json       # 项目配置
├── README.md          # 项目说明
└── *.swf             # 游戏文件
```

## 常见问题

### Q: Ruffle加载失败
A: 检查网络连接，确保可以访问CDN。如持续失败，可尝试更换网络环境。

### Q: 无法连接服务器
A: 
1. 确认服务器已启动
2. 检查防火墙端口是否开放
3. 确认WebSocket连接正常

### Q: 游戏点击无反应
A: 
1. 确保没有其他元素遮挡游戏区域
2. 尝试刷新页面
3. 检查浏览器控制台是否有错误

### Q: 按键不生效
A: 
1. 点击页面确保获得焦点
2. 检查按键是否与其他软件冲突
3. 尝试自定义按键

## 版本历史

- v1.0.0 - 初始版本
  - 基础游戏功能
  - WebSocket联机
  - 房间系统
  - 自定义SWF加载

## 许可证

MIT License
